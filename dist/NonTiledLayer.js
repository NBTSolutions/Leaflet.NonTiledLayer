/*! leaflet.nontiledlayer - v1.0.6 - 2017-09-22 */


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).L||(e.L={})).NonTiledLayer=t()}}(function(){return function t(e,i,s){function n(o,r){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!r&&h)return h(o,!0);if(a)return a(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return n(i||t)},u,u.exports,t,e,i,s)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,e,i){(function(t){"use strict";var i="undefined"!=typeof window?window.L:void 0!==t?t.L:null;i.NonTiledLayer.WMS=i.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(t,e){this._wmsUrl=t;var s=i.extend({},this.defaultWmsParams);for(var n in e)i.NonTiledLayer.prototype.options.hasOwnProperty(n)||i.Layer&&i.Layer.prototype.options.hasOwnProperty(n)||(s[n]=e[n]);this.wmsParams=s,i.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,i.NonTiledLayer.prototype.onAdd.call(this,t)},getImageUrl:function(t,e,s){var n=this.wmsParams;n.width=e,n.height=s;var a=this._crs.project(t.getNorthWest()),o=this._crs.project(t.getSouthEast()),r=this._wmsUrl,h=h=(this._wmsVersion>=1.3&&this._crs===i.CRS.EPSG4326?[o.y,a.x,a.y,o.x]:[a.x,o.y,o.x,a.y]).join(",");return r+i.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+h},setParams:function(t,e){return i.extend(this.wmsParams,t),e||this.redraw(),this}}),i.nonTiledLayer.wms=function(t,e){return new i.NonTiledLayer.WMS(t,e)},e.exports=i.NonTiledLayer.WMS}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,i){(function(t){"use strict";var i="undefined"!=typeof window?window.L:void 0!==t?t.L:null;i.NonTiledLayer=(i.Layer||i.Class).extend({includes:i.Evented||i.Mixin.Events,emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",options:{attribution:"",opacity:1,zIndex:void 0,minZoom:0,maxZoom:18,pointerEvents:null,errorImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",bounds:i.latLngBounds([-85.05,-180],[85.05,180]),useCanvas:void 0},key:"",dirty:!1,initialize:function(t){i.setOptions(this,t)},onAdd:function(t){this._map=t,void 0===this._zoomAnimated&&(this._zoomAnimated=i.DomUtil.TRANSITION&&i.Browser.any3d&&!i.Browser.mobileOpera&&this._map.options.zoomAnimation),i.version<"1.0"&&this._map.on(this.getEvents(),this),this._div||(this._div=i.DomUtil.create("div","leaflet-image-layer"),this.options.pointerEvents&&(this._div.style["pointer-events"]=this.options.pointerEvents),void 0!==this.options.zIndex&&(this._div.style.zIndex=this.options.zIndex),void 0!==this.options.opacity&&(this._div.style.opacity=this.options.opacity)),this.getPane().appendChild(this._div);var e=!!window.HTMLCanvasElement;void 0===this.options.useCanvas?this._useCanvas=e:this._useCanvas=this.options.useCanvas,this._useCanvas?(this._bufferCanvas=this._initCanvas(),this._currentCanvas=this._initCanvas()):(this._bufferImage=this._initImage(),this._currentImage=this._initImage()),this._update()},getPane:function(){return i.Layer?i.Layer.prototype.getPane.call(this):(this.options.pane?this._pane=this.options.pane:this._pane=this._map.getPanes().overlayPane,this._pane)},onRemove:function(t){i.version<"1.0"&&this._map.off(this.getEvents(),this),this.getPane().removeChild(this._div),this._useCanvas?(this._div.removeChild(this._bufferCanvas),this._div.removeChild(this._currentCanvas)):(this._div.removeChild(this._bufferImage),this._div.removeChild(this._currentImage))},addTo:function(t){return t.addLayer(this),this},_setZoom:function(){this._useCanvas?(this._currentCanvas._bounds&&this._resetImageScale(this._currentCanvas,!0),this._bufferCanvas._bounds&&this._resetImageScale(this._bufferCanvas)):(this._currentImage._bounds&&this._resetImageScale(this._currentImage,!0),this._bufferImage._bounds&&this._resetImageScale(this._bufferImage))},getEvents:function(){var t={moveend:this._update};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),i.version>="1.0"&&(t.zoom=this._setZoom),t},getElement:function(){return this._div},setOpacity:function(t){return this.options.opacity=t,this._div&&i.DomUtil.setOpacity(this._div,this.options.opacity),this},setZIndex:function(t){return t&&(this.options.zIndex=t,this._div&&(this._div.style.zIndex=t)),this},bringToFront:function(){return this._div&&this.getPane().appendChild(this._div),this},bringToBack:function(){return this._div&&this.getPane().insertBefore(this._div,this.getPane().firstChild),this},getAttribution:function(){return this.options.attribution},_initCanvas:function(){var t=i.DomUtil.create("canvas","leaflet-image-layer");return this._div.appendChild(t),t._image=new Image,this._ctx=t.getContext("2d"),this._map.options.zoomAnimation&&i.Browser.any3d?i.DomUtil.addClass(t,"leaflet-zoom-animated"):i.DomUtil.addClass(t,"leaflet-zoom-hide"),i.extend(t._image,{onload:i.bind(this._onImageLoad,this),onerror:i.bind(this._onImageError,this)}),t},_initImage:function(){var t=i.DomUtil.create("img","leaflet-image-layer");return this._div.appendChild(t),this._map.options.zoomAnimation&&i.Browser.any3d?i.DomUtil.addClass(t,"leaflet-zoom-animated"):i.DomUtil.addClass(t,"leaflet-zoom-hide"),i.extend(t,{galleryimg:"no",onselectstart:i.Util.falseFn,onmousemove:i.Util.falseFn,onload:i.bind(this._onImageLoad,this),onerror:i.bind(this._onImageError,this)}),t},redraw:function(){return this._map&&this._update(),this},_animateZoom:function(t){this._useCanvas?(this._currentCanvas._bounds&&this._animateImage(this._currentCanvas,t),this._bufferCanvas._bounds&&this._animateImage(this._bufferCanvas,t)):(this._currentImage._bounds&&this._animateImage(this._currentImage,t),this._bufferImage._bounds&&this._animateImage(this._bufferImage,t))},_animateImage:function(t,e){if(void 0===i.DomUtil.setTransform){var s=this._map,n=t._scale*s.getZoomScale(e.zoom),a=t._bounds.getNorthWest(),o=t._bounds.getSouthEast(),r=s._latLngToNewLayerPoint(a,e.zoom,e.center),h=s._latLngToNewLayerPoint(o,e.zoom,e.center)._subtract(r),d=r._add(h._multiplyBy(.5*(1-1/n)));t.style[i.DomUtil.TRANSFORM]=i.DomUtil.getTranslateString(d)+" scale("+n+") "}else{var s=this._map,n=t._scale*t._sscale*s.getZoomScale(e.zoom),a=t._bounds.getNorthWest(),o=t._bounds.getSouthEast(),r=s._latLngToNewLayerPoint(a,e.zoom,e.center);i.DomUtil.setTransform(t,r,n)}t._lastScale=n},_resetImageScale:function(t,e){var s=new i.Bounds(this._map.latLngToLayerPoint(t._bounds.getNorthWest()),this._map.latLngToLayerPoint(t._bounds.getSouthEast())),n=t._orgBounds.getSize().y,a=s.getSize().y/n;t._sscale=a,i.DomUtil.setTransform(t,s.min,a)},_resetImage:function(t){var e=new i.Bounds(this._map.latLngToLayerPoint(t._bounds.getNorthWest()),this._map.latLngToLayerPoint(t._bounds.getSouthEast())),s=e.getSize();i.DomUtil.setPosition(t,e.min),t._orgBounds=e,t._sscale=1,this._useCanvas?(t.width=s.x,t.height=s.y):(t.style.width=s.x+"px",t.style.height=s.y+"px")},_getClippedBounds:function(){var t=this._map.getBounds(),e=t.getSouth(),s=t.getNorth(),n=t.getWest(),a=t.getEast(),o=this.options.bounds.getSouth(),r=this.options.bounds.getNorth(),h=this.options.bounds.getWest(),d=this.options.bounds.getEast();e<o&&(e=o),s>r&&(s=r),n<h&&(n=h),a>d&&(a=d);var u=new i.LatLng(s,n),m=new i.LatLng(e,a);return new i.LatLngBounds(u,m)},_update:function(){if(!this.dirty){var t,e=this._getClippedBounds(),s=this._map.latLngToContainerPoint(e.getNorthWest()),n=this._map.latLngToContainerPoint(e.getSouthEast()),a=n.x-s.x,o=n.y-s.y;if(this._useCanvas?(this._bufferCanvas._scale=this._bufferCanvas._lastScale,this._currentCanvas._scale=this._currentCanvas._lastScale=1,this._bufferCanvas._sscale=1,this._currentCanvas._bounds=e,this._resetImage(this._currentCanvas),t=this._currentCanvas._image,i.DomUtil.setOpacity(t,0)):(this._bufferImage._scale=this._bufferImage._lastScale,this._currentImage._scale=this._currentImage._lastScale=1,this._bufferImage._sscale=1,this._currentImage._bounds=e,this._resetImage(this._currentImage),t=this._currentImage,i.DomUtil.setOpacity(t,0)),this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom||a<32||o<32)return this._div.style.visibility="hidden",t.src=this.emptyImageUrl,this.key=t.key="<empty>",void(t.tag=null);this.key=e.getNorthWest()+", "+e.getSouthEast()+", "+a+", "+o,this.getImageUrl?(t.src=this.getImageUrl(e,a,o),t.key=this.key):this.getImageUrlAsync(e,a,o,this.key,function(e,i,s){t.key=e,t.src=i,t.tag=s}),this.fire("loading")}},_onImageError:function(t){this.fire("error",t),i.DomUtil.addClass(t.target,"invalid"),t.target.src!==this.options.errorImageUrl&&(t.target.src=this.options.errorImageUrl)},_onImageLoad:function(t){(t.target.src===this.options.errorImageUrl||(i.DomUtil.removeClass(t.target,"invalid"),t.target.key&&t.target.key===this.key))&&(this._onImageDone(t),this.fire("load",t))},_onImageDone:function(t){if(this._useCanvas)this._renderCanvas(t);else{i.DomUtil.setOpacity(this._currentImage,1),i.DomUtil.setOpacity(this._bufferImage,0),this._addInteraction&&this._currentImage.tag&&this._addInteraction(this._currentImage.tag);var e=this._bufferImage;this._bufferImage=this._currentImage,this._currentImage=e}"<empty>"!==t.target.key&&(this._div.style.visibility="visible")},_renderCanvas:function(t){this._currentCanvas.getContext("2d").drawImage(this._currentCanvas._image,0,0),i.DomUtil.setOpacity(this._currentCanvas,1),i.DomUtil.setOpacity(this._bufferCanvas,0),this._addInteraction&&this._currentCanvas._image.tag&&this._addInteraction(this._currentCanvas._image.tag);var e=this._bufferCanvas;this._bufferCanvas=this._currentCanvas,this._currentCanvas=e},setDirty:function(){this.dirty=!0},setClean:function(){this.dirty=!1,this.redraw()}}),i.nonTiledLayer=function(){return new i.NonTiledLayer},e.exports=i.NonTiledLayer}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2,1])(2)});
//# sourceMappingURL=NonTiledLayer.js.map